version: 2.1
jobs:
  sap-build:
    docker:
      - image: navoday/hybriszip
    steps:
      - checkout
      - run:
          name: Build sap code 
          command: |
            cd /opt && unzip hybris.zip
            cp oca-commerce/core-customize/hybris/bin/custom /opt/hybris/bin
            cp oca-commerce/core-customize/hybris/config/localdev.properties /opt/hybris/config/local.properties
            cp oca-commerce/core-customize/hybris/config/localextensions.xml /opt/hybris/config
            chmod -R 777 /opt/hybris/bin/platform
            cd /opt/hybris/bin/platform
            ./hybrisserver.sh
            ant clean all -Dinput.template=develop
workflows:
  build:
    jobs:
      - sap-build
